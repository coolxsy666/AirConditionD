{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <title>lcmanager</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
      <link href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <link href="{% static 'css/jquery-ui-themes.css' %}" type="text/css" rel="stylesheet"/>
    <link href="{% static 'css/axure_rp_page.css' %}" type="text/css" rel="stylesheet"/>
    <link href="{% static 'data/styles.css' %}" type="text/css" rel="stylesheet"/>
    <link href="{% static 'files/lcmanager/styles.css' %}" type="text/css" rel="stylesheet"/>

     <script src="https://cdn.bootcss.com/jquery/2.2.3/jquery.min.js"></script>
    <script src="{% static 'scripts/jquery-ui-1.8.10.custom.min.js' %}"></script>
    <script src="{% static 'scripts/prototypePre.js' %}"></script>
    <script src="{% static 'data/document.js' %}"></script>
    <script src="{% static 'scripts/prototypePost.js' %}"></script>

    <script src="{% static 'files/lcmanager/data.js' %}"></script>
    <script type="text/javascript">
      $axure.utils.getTransparentGifPath = function() { return 'resources/images/transparent.gif'; };
      $axure.utils.getOtherPath = function() { return 'resources/Other.html'; };
      $axure.utils.getReloadPath = function() { return 'resources/reload.html'; };
    </script>
  </head>
  <body onload="refresh()">
    <div id="base" class="">

{#      <!-- Unnamed (矩形) -->#}
{#      <div id="u30" class="ax_default box_1">#}
{#        <img id="u30_img" class="img " src="/static/images/lcmanager/u30.png"/>#}
{#      </div>#}

      <!-- Unnamed (矩形) -->
      <div id="u31" class="ax_default box_1">
        <div id="u31_div" class=""></div>
        <div id="u31_text" class="text ">
          <p><span>&nbsp;&nbsp; 分布式管理系统（空调管理员）</span></p>
        </div>
      </div>

      <!-- Unnamed (矩形) -->
      <div id="u32" class="ax_default box_1">
        <img id="u32_img" class="img " src="/static/images/lcmanager/u32.png"/>
      </div>

      <!-- Unnamed (矩形) -->
      <div id="u33" class="ax_default label">
        <div id="u33_div" class=""></div>
        <div id="u33_text" class="text ">
          <p><span>中央空调：</span></p>
        </div>
      </div>

      <!-- Unnamed (矩形) -->
      <div id="u34" class="ax_default label">
        <div id="u34_div" class=""></div>
        <div id="u34_text" class="text ">
          <p><span>处理能力：</span></p>
        </div>
      </div>

      <!-- Unnamed (下拉列表框) -->
      <div id="u35" class="ax_default droplist">
        <select class="u35_input">

          <option value="1">1</option>
          <option value="2">2</option>
          <option selected value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
          <option value="8">8</option>

        </select>
      </div>

      <!-- Unnamed (矩形) -->


{#      <!-- Unnamed (矩形) -->#}
{#      <div id="u37" class="ax_default label">#}
{#        <div id="u37_div" class=""></div>#}
{#        <div id="u37_text" class="text ">#}
{#          <p><span>请输入房间号：</span></p>#}
{#        </div>#}
{#      </div>#}
{##}
{#      <!-- Unnamed (文本框) -->#}
{#        <form name="id">#}
{#      <div id="u38" class="ax_default text_field">#}
{#        <input id="u38_input" name="room" type="text" value=""/>#}
{#      </div>#}
{#        </form>#}
{##}
{#      <!-- Unnamed (矩形) -->#}
{#      <div id="u39" class="ax_default button">#}
{#        <div id="u39_div" class=""></div>#}
{#          <button id="u66_div" name="state" value="off" onclick="djs()">OK</button>#}
{#        </div>#}
{#      </div>#}
{##}
{#      <!-- Unnamed (矩形) -->#}
{#      <div id="u40" class="ax_default label">#}
{#        <div id="u40_div" class=""></div>#}
{#        <div id="u40_text" class="text ">#}
{#          <p><span>操作：</span></p>#}
{#        </div>#}
{#      </div>#}
{##}
{#      <!-- Unnamed (矩形) -->#}
{#      <div id="u41" class="ax_default label">#}
{#        <div id="u41_div" class=""></div>#}
{#        <div id="u41_text" class="text ">#}
{#          <p><span>开关：</span></p>#}
{#        </div>#}
{#      </div>#}
{##}
{#      <!-- Unnamed (下拉列表框) -->#}
{#      <div id="u42" class="ax_default droplist">#}
{#        <select id="u42_input">#}
{#          <option id="on_off" value="开">开</option>#}
{#          <option id="on_off" value="关">关</option>#}
{#        </select>#}
{#      </div>#}
{##}
{#      <!-- Unnamed (矩形) -->#}
{#      <div id="u43" class="ax_default label">#}
{#        <div id="u43_div" class=""></div>#}
{#        <div id="u43_text" class="text ">#}
{#          <p><span>温度：</span></p>#}
{#        </div>#}
{#      </div>#}
{##}
{#      <!-- Unnamed (下拉列表框) -->#}
{#      <div id="u44" class="ax_default droplist">#}
{#        <select id="u44_input">#}
{#          <option value="18">18</option>#}
{#          <option value="19">19</option>#}
{#          <option value="20">20</option>#}
{#          <option value="21">21</option>#}
{#          <option value="22">22</option>#}
{#          <option value="23">23</option>#}
{#          <option value="24">24</option>#}
{#          <option value="25">25</option>#}
{#          <option value="26">26</option>#}
{#          <option value="27">27</option>#}
{#          <option value="28">28</option>#}
{#          <option value="29">29</option>#}
{#          <option value="30">30</option>#}
{#        </select>#}
{#      </div>#}
{##}
{#      <!-- Unnamed (矩形) -->#}
{#      <div id="u45" class="ax_default label">#}
{#        <div id="u45_div" class=""></div>#}
{#        <div id="u45_text" class="text ">#}
{#          <p><span>风速：</span></p>#}
{#        </div>#}
{#      </div>#}
{##}
{#      <!-- Unnamed (下拉列表框) -->#}
{#      <div id="u46" class="ax_default droplist">#}
{#        <select id="u46_input">#}
{#          <option value="1">1</option>#}
{#          <option value="2">2</option>#}
{#          <option value="3">3</option>#}
{#        </select>#}
{#      </div>#}

      <!-- Unnamed (矩形) -->
{#      <div id="u47" class="ax_default label">#}
{#        <div id="u47_div" class=""></div>#}
{#        <div id="u47_text" class="text ">#}
{#          <p><span>计费参数：</span></p>#}
{#        </div>#}
{#      </div>#}


      <!-- Unnamed (矩形) -->
      <div id="u49" class="ax_default label">
        <div id="u49_div" class=""></div>
        <div id="u49_text" class="text ">
          <p><span>状态监控：</span></p>
        </div>
      </div>

      <!-- Unnamed (表格) -->
      <div id="u50" class="ax_default">
<table class="table" border="1" align="right">
    <thead text-align="center">
      <tr>
          <th>房间号</th>
{#        <th>是否开机</th>#}
{#        <th>是否正在服务</th>#}
        <th>状态</th>
          <th>当前室温</th>
          <th>目标温度</th>
          <th>风速</th>
{#          <th>计费参数</th>#}
          <th>费用</th>
          <th>服务时长</th>
      </tr>
    </thead>
    <tbody id="ko1">

    </tbody>
  </table>

      </div>


      <!-- Unnamed (形状) -->
      <div id="u61" class="ax_default icon">
          <button id="u66_div" name="state" value="on" onclick="turn_on1()">开</button>
      </div>
      <div id="u62" class="ax_default icon">
          <button id="u66_div" name="state" value="off" onclick="turn_off1()">关</button>
      </div>

      <!-- Unnamed (矩形) -->
      <div id="u64" class="ax_default label">
        <div id="u64_div" class=""></div>
        <div id="u64_text" class="text ">
          <p><span>缺省温度：</span></p>
        </div>
      </div>

      <!-- Unnamed (下拉列表框) -->
      <div id="u65" class="ax_default droplist">
        <select class="u65_input">
          <option value="18">18</option>
          <option value="19">19</option>
          <option value="20">20</option>
          <option value="21">21</option>
          <option value="22">22</option>
          <option value="23">23</option>
          <option selected value="24">24</option>
          <option value="25">25</option>
          <option  value="26">26</option>
        </select>
      </div>



      <div id="u78" class="ax_default text_field">
          <div id="78">5</div>
      </div>







      <!-- Unnamed (矩形) -->
      <div id="u67" class="ax_default label">
        <div id="u67_div" class=""></div>
        <div id="u67_text" class="text ">
          <p><span>温控模式</span></p>
        </div>
      </div>

      <!-- Unnamed (下拉列表框) -->
      <div id="u68" class="ax_default droplist">
        <select class="u68_input">
          <option value=0>冷</option>
          <option value=1>热</option>
        </select>
      </div>


      <!-- Unnamed (矩形) -->
      <div id="u70" class="ax_default label">
        <div id="u70_div" class=""></div>
        <div id="u70_text" class="text ">
          <p><span>计费参数</span></p>
        </div>
      </div>

      <!-- Unnamed (下拉列表框) -->
      <div id="u71" class="ax_default droplist">
        <select class="u71_input">
          <option value="1">低</option>
          <option value="2">中</option>
          <option value="3">高</option>
        </select>
      </div>

      <!-- Unnamed (矩形) -->
      <div id="u72" class="ax_default button">
        <div id="u72_div" class=""></div>
        <button id="u66_div" name="state" value="off" onclick="djs1()">OK</button>

        </div>
      </div>

      <!-- Unnamed (下拉列表框) -->
{#      <div id="u73" class="ax_default droplist">#}
{#        <select id="u73_input">#}
{#          <option value="1">1</option>#}
{#          <option value="2">2</option>#}
{#          <option value="3">3</option>#}
{#        </select>#}
{#      </div>#}
    </div>
  </body>
</html>

<script type="application/javascript">
    function turn_on1() {

        document.getElementById("78").innerHTML=1;
        alert("主控机已经启动！！！");
        var tbody=window.document.getElementById("ko1");
        var str = " ";

        {#$(".u71_input").val(2);//计费参数 1-3 低 中 高#}
        {#$(".u65_input").val(24);//默认温度#}
        {#$(".u68_input").val(2);//制冷制热，0为冷1为热#}
        {#$(".u35_input").val(3);//处理能力 默认为3 1-8#}
        refresh()



        $.ajax({
            type : 'GET',
            url:"/startup/",
            crossDomain:true,
            success:function () {
                
            }
        });




    }
    function refresh() {

        $.ajax({
            type : 'GET',
            url:"/checkmystate/",
            crossDomain:true,
            success:function (data) {
                {#alert(data['feerate'])#}
                {#alert(data['defaultTemp'])#}
                {#alert(data['mode'])#}
                {#alert(data['handleNum'])#}
                $(".u71_input").val(data['feerate']);//计费参数 1-3 低 中 高
                $(".u65_input").val(data['defaultTemp']);//默认温度
                $(".u68_input").val(data['mode']);//制冷制热，0为冷1为热
                $(".u35_input").val(data['handleNum']);//处理能力 默认为3 1-8
            }
        });
        var str=""
        var tbody=window.document.getElementById("ko1");
        $.ajax({
            type : 'GET',
            url:"/checkstate/",
            crossDomain:true,
            success:function (data) {
                    for (var i=0;i< data['items'].length;i++){
                        str += "<tr>" +
            "<td>"+data['items'][i].roomid+"</td>"+
            "<td>"+data['items'][i].state+"</td>"+
            "<td>"+data['items'][i].cur_temp+"</td>"+
            "<td>"+data['items'][i].tar_temp+"</td>"+
            "<td>"+data['items'][i].speed+"</td>"+
            "<td>"+data['items'][i].cost+"</td>"+
            "<td>"+data['items'][i].serve_time+"</td>"+

            "</tr>" ;
         tbody.innerHTML=str;
                    }

            }
        });


    }
</script>

<script type="application/javascript">
    function turn_off1() {

        var tbody=window.document.getElementById("ko1");
        var str = " ";

        str += "<tr>" +
            "<td>"+"--"+"</td>"+
            "<td>"+"--"+"</td>"+
            "<td>"+"--"+"</td>"+
            "<td>"+"--"+"</td>"+
            "<td>"+"--"+"</td>"+
            "<td>"+"--"+"</td>"+
            "<td>"+"--"+"</td>"+
            "<td>"+"--"+"</td>"+
            "<td>"+"--"+"</td>"+
            "<td>"+"--"+"</td>"+
            "</tr>" ;
         tbody.innerHTML=str;



        $.ajax({
            type : 'GET',
            url:"/closeup/",
            crossDomain:true,
            success:function () {
                alert("关闭成功！")

            },
            error:function () {

            }
        })

    }
</script>

<script type="application/javascript">
    function djs() {

        var lt = id.room.value;
        var u42_input=$('#u42_input').val();
        var u44_input=$('#u44_input').val();
        var u46_input=$('#u46_input').val();
        var u73_input=$('#u73_input').val();
         alert(u42_input);
        alert(u44_input);
        alert(u46_input);
        alert(u73_input);

        $.ajax({
            type: "POST",
            url: "/editslave/"+lt,
            contentType: "application/json", //必须有
            dataType: "json", //表示返回值类型，不必须
            data: JSON.stringify({ 'on-off':u42_input , 'temp': u44_input,'speed':u46_input,'feefate':u73_input }),  //相当于 //data: "{'str1':'foovalue', 'str2':'barvalue'}",
            success: function () {

            }
        });


    }
</script>

<script type="application/javascript">
    function djs1() {


        var u42_input=$('.u35_input').val();
        var u44_input=$('.u65_input').val();
        var u46_input=$('.u68_input').val();
        var u73_input=$('.u71_input').val();
        //alert(u42_input);
        //alert(u44_input);
        //alert(u46_input);
  //      alert(u73_input);

        $.ajax({
            type: "POST",
            url: "/setPara/",
            //contentType: "application/json", //必须有
            //dataType: "json", //表示返回值类型，不必须
            data: { 'handleNum':u42_input , 'defaultTemp': u44_input,'mode':u46_input,'feerate':u73_input },  //相当于 //data: "{'str1':'foovalue', 'str2':'barvalue'}",
            success: function (data) {
                alert(data.content)
            }
        });



    }
</script>